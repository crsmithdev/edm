# Dataset Configuration for ML Training
# This file controls which JAMS annotations are used for training/validation/testing
# Following JAMS standard format: https://github.com/marl/jams

# Data source
data_format: "jams"  # Use JAMS standard format
data_dir: "data/jams"  # Directory containing .jams files

# Data filtering based on JAMS annotation_metadata
filters:
  # Quality tier filtering (stored in annotator.tier)
  # 1=verified, 2=auto-cleaned, 3=auto-generated
  min_tier: 2
  max_tier: 3

  # Confidence score threshold (from observation.confidence)
  min_confidence: 0.7

  # Source filtering (from annotation_metadata.corpus)
  allowed_sources:
    - rekordbox
    - manual
    # - msaf  # Commented out: exclude MSAF-generated for this experiment
    # - ml_model_v1

  # Import configuration filtering (from annotation_metadata.annotation_rules)
  # These are stored as strings in JAMS, parsed from rules field
  import_config:
    # Only use annotations imported with hot cues
    # Matches: "cue_types=['hot']" in annotation_rules
    cue_types: ["hot"]

    # Only use deduplicated data
    # Matches: "deduplicate=True" in annotation_rules
    deduplicate_timestamps: true

    # Label inference method
    # Matches: "label_inference=cue_name" in annotation_rules
    # Options: null (any), "cue_name", "energy", "manual", "ml_model"
    label_inference: "cue_name"

  # Annotator type filtering (from annotation_metadata.annotator.output_type)
  # Options: "human_verified", "automatic_cleaned", "automatic", "human"
  allowed_annotator_types:
    - human_verified
    - automatic_cleaned

# Label handling
labels:
  # Which labels to include in training
  # Options: null (all labels), or list of specific labels
  include: null  # Use all labels: intro, buildup, drop, breakdown, outro

  # Ignore labels entirely (use only boundary timestamps)
  ignore_labels: false

  # Label mapping/grouping (optional)
  # Useful for experiments with coarser granularity
  mapping: null
    # Example mapping:
    # intro: intro
    # buildup: transition
    # drop: drop
    # breakdown: transition
    # outro: outro

# Dataset splits
splits:
  train: 0.7
  val: 0.15
  test: 0.15

  # Random seed for reproducibility
  seed: 42

  # Split strategy
  # Options: "random", "stratified" (by label distribution), "temporal" (by date)
  strategy: "stratified"

# Data augmentation (optional)
augmentation:
  enabled: false
  # Add augmentation options here when implemented
  # - time_stretch
  # - pitch_shift
  # - noise_injection

# Version tracking
version: "v1.0"
notes: "Baseline dataset: Rekordbox hot cues only, tier 2-3, min confidence 0.7"
