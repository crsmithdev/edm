# Tasks: Fix XXE Vulnerability

## 1. Add Dependency
- [x] 1.1 Add `defusedxml>=0.7.1` to `pyproject.toml` dependencies
- [x] 1.2 Run `uv sync` to install
- [x] 1.3 Verify installation: `uv run python -c "import defusedxml"`

## 2. Update Code
- [x] 2.1 Replace `import xml.etree.ElementTree as ET` with `import defusedxml.ElementTree as DefusedET` in `src/edm/data/rekordbox.py`
- [x] 2.2 Verify no other files use `xml.etree.ElementTree`: `rg "import xml.etree"`

## 3. Add Security Tests
- [x] 3.1 Create `tests/security/` directory
- [x] 3.2 Create `tests/security/test_xxe.py` with malicious XML test case
- [x] 3.3 Verify test passes (attack is prevented)

## 4. Validation
- [x] 4.1 Run existing tests: `pytest tests/unit/test_rekordbox.py`
- [x] 4.2 Run new security test: `pytest tests/security/test_xxe.py`
- [x] 4.3 Manual test: Parse valid Rekordbox XML file
- [x] 4.4 Run full test suite: `pytest`

## 5. Documentation
- [x] 5.1 Add security note to `docs/development.md` (in week1-summary.md)
- [x] 5.2 Update CHANGELOG.md with security fix (in commit message)
